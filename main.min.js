"use strict";$(function(){OrderDedicated.init()});var OrderDedicated=function(){var o=".order-dedicated-container",f="option_selected",v="d-none";return{init:function(){var a=$(o);if(a.length){var r=$("form",a);r.on("submit",function(e){return e.preventDefault(),$.ajax({url:r.attr("action"),data:r.serialize(),beforeSend:function(){Loader.show(r,250)},success:function(e){if(FieldError.hideAll(r),e.error)FieldError.showAll(r,e.error);else{$(".form-data-section",a).remove();var t=$(".sent-msg",a);$("#order-msg-email",t).text(e.email),t.removeClass("hidden")}}}),!1})}},show:function(e){var t=$(o);$("body").addClass("over-h"),t.removeClass("hidden"),$('input[type="text"]:visible',t).eq(0).focus(),$("#order_package",t).val(e.dataset.package),$("#order_price",t).val(e.dataset.price),$("#order_ssd",t).val(e.dataset.ssd),$("#order_hdd",t).val(e.dataset.hdd),$(document).on("keydown",function(e){27===e.keyCode&&($(document).off("keydown"),Order.hide())})},serviceChanged:function(e){var t=$(e),a=t.closest(".dedic-item"),r=a.find(".price_old").first(),o=a.find(".price_new").first(),i=a.find(".btn-order").first(),s=a.find(".option_ssd"),n=a.find(".option_hdd");t.siblings(".dedic-changeble-option").removeClass(f),t.addClass(f);var d=n.filter('[data-service="1TbSATA"]'),l=n.filter('[data-service="2TbSATA"]');switch(e.dataset.service){case"2x256Gb":d.removeClass(v);break;case"2x512Gb":d.addClass(v),l.trigger("click")}var c=s.filter(".option_selected").first(),h=n.filter(".option_selected").first(),m=parseInt(r.data("price-default")),u=parseInt(o.data("price-default"));m+=parseInt(c.data("price-item")),m+=parseInt(h.data("price-item")),u+=parseInt(c.data("price-item")),u+=parseInt(h.data("price-item")),r.html("&nbsp;"+new Intl.NumberFormat("ru-RU",{style:"decimal"}).format(m)+"&nbsp;"),o.text(new Intl.NumberFormat("ru-RU",{style:"decimal"}).format(u)),i.attr({"data-price":u,"data-ssd":c.data("service"),"data-hdd":h.data("service")})}}}(),DocsLimits={toggleArchivePackages:function(e){$(e).toggleClass("hidden")}};$(function(){Domains.init()});var Domains={selectorNav:".domains-types",selectorZones:".domains-zones",registerContainer:".domain-register-container",registerForm:".domain-register-form",STATUS_PREMIUM:"premium",STATUS_TAKEN:"taken",STATUS_EXIST:"exist",STATUS_FREE:"free",init:function(){var e=$(this.selectorNav);if(e.length){var t=location.hash.replace("#","");if(""!==t){var a=$('a[href="#'+t+'"]',e);a.length&&a.trigger("click")}}},show:function(e){var t=$(e),a=t.closest(".domains-zones-container"),r=$(this.selectorNav,a).find("a"),o=$(this.selectorZones,a),i=$("li",o),s=t.attr("href").substr(1);i.addClass("d-none"),i.filter(".domain-type-"+s).removeClass("d-none"),r.removeClass("active"),t.addClass("active")},register:function(e){Goals.reachGoal(26154889,"domains-jump-in-register-form");var t=$(e).data("domain"),a=$(this.registerContainer);$("#register-domain",a).text(t),$(".btn-domain-reg",a).each(function(){var e=$(this);e.attr("href",e.data("url")+"&domain="+t)}),$("body").addClass("over-h"),a.removeClass("d-none"),$(document).on("keydown",function(e){27===e.keyCode&&($(document).off("keydown"),Order.hide())})},showSelect:function(e){var t=$(e),a=t.closest(".domains-zones-container"),r=$(this.selectorNav,a).find("a"),o=$(this.selectorZones,a),i=$("li",o);i.addClass("d-none"),i.filter(".domain-type-"+t.val()).removeClass("d-none"),r.removeClass("active"),t.addClass("active")},checkAll:function(e,t){e.preventDefault();var a=this,r=$(t),o=r.closest(".other-zones"),i=$(".other-zones-table tbody",o),s=$(".check-zone-title",o);$.ajax({url:r.attr("action"),data:r.serialize(),beforeSend:function(){Goals.reachGoal(26154879,"domains-check-domain-all-tlds"),Loader.show(o,200)},success:function(e){1===e.status?(a.addExtraTld(e.data,i),s.addClass("d-none")):i.html("")}})},whois:function(e,t){e.preventDefault();var a=$(t),r=this,o=$("#"+a.attr("id")+"_whois_container"),i=$("#"+a.attr("id")+"_whois_msg"),s=$("#"+a.attr("id")+"_free_container"),n=$("#"+a.attr("id")+"_free_msg"),d=$("#"+a.attr("id")+"_free_error");$.ajax({url:a.attr("action"),data:a.serialize(),beforeSend:function(){Goals.reachGoal(26690229,"whois-check-domain"),o.addClass("d-none"),s.addClass("d-none"),Loader.show(a,200),$("input",a).blur()},success:function(e){e.whois?(i.html(e.whois.replace(/\n/g,"<br/>")),o.removeClass("d-none"),i.removeClass("d-none"),window.history.pushState({},"","?domain="+e.domain)):(s.removeClass("d-none"),e.error?(n.addClass("d-none"),d.removeClass("d-none"),r.errorsConvert(d,e.error)):(d.addClass("d-none"),n.removeClass("d-none"),$(".free-domain",n).text(e.domain),$(".show-price-url").attr("href",s.data("priceUrl")+"?domain="+e.domain),window.history.pushState({},"","?domain="+e.domain)))}})},check:function(e,t){e.preventDefault();var a=$(t);if(""!==a.find('input[name*="domain"]').val()){var r=this,o=$("#"+a.attr("id")+"_reg_container"),i=$("#"+a.attr("id")+"_reg_msg"),s=$("#"+a.attr("id")+"_reg_btn"),n=$(".other-zones-container"),d=$(".check-zone-title",n),l=$("#"+a.attr("id")+"_reg_table tbody");window.history.pushState({},"","?domain="+a.find('input[name*="domain"]').val()),$.ajax({url:a.attr("action"),data:a.serialize(),beforeSend:function(){Goals.reachGoal(26154874,"domains-check-domain"),Goals.reachGoal(26154909,"domains-check-domain"),o.addClass("d-none"),s.addClass("d-none"),n.addClass("d-none"),i.addClass("d-none"),i.removeClass("result-success"),Loader.show(a,200),$("input",a).blur()},success:function(e){if(o.removeClass("d-none"),i.removeClass("d-none"),d.removeClass("d-none"),e.error)r.errorsConvert(i,e.error);else switch(e.state){case r.STATUS_TAKEN:i.html("Домен <strong>"+e.domain+"</strong> уже занят"),e.extra_tld&&(r.addExtraTld(e.extra_tld,l),n.removeClass("d-none"),$('input[type="hidden"]',n).val(e.domain_wo_tld));break;case r.STATUS_PREMIUM:i.html("Домен <strong>"+e.domain+"</strong> является премиальным, для его регистрации необходимо обратится в reg.ru"),i.addClass("result-success"),e.extra_tld&&(r.addExtraTld(e.extra_tld,l),n.removeClass("d-none"),$('input[type="hidden"]',n).val(e.domain_wo_tld));break;default:i.html("Домен <strong>"+e.domain+"</strong> свободен для регистрации"),i.addClass("result-success"),s.data("domain",e.domain).removeClass("d-none")}}})}},addExtraTld:function(e,t){if(e){for(var a in t.html(""),e){var r=e[a];"y"===r.available&&t.append($("<tr/>",{class:"hover-row"}).append('<td height="50" class="p-l-5 p-r-10 ws-break">'+r.domain+("taken"===r.state?' <span class="color-pink">занят</span>':" свободен")+"</td>").append(function(){return"premium"===r.state?'<td colspan="2" width="300">домен является премиальным, для его регистрации необходимо обратится в reg.ru</td>':'<td width="100">'+r.price+' руб</td><td width="200" class="p-r-5">'+("free"===r.state?'<button type="button" class="btn btn-block btn-input btn-violet btn-hover-blue" data-domain="'+r.domain+'" onclick="Domains.register(this)">Зарегистрировать</button>':"")+"</td>"}))}t.removeClass("d-none")}},setPrlCategory:function(t){for(var a="d-none",r="active",e=document.querySelector(".domains-count__pointer"),o=document.querySelectorAll(".domains-zones .prl"),i=document.querySelectorAll(".domains-count__amount"),s=1;s<e.classList.length;s++)e.classList.remove(e.classList[s]);o.forEach(function(e){e.classList.contains(a)||e.classList.add(a),e.classList.contains(t)&&e.classList.remove(a)}),i.forEach(function(e){e.classList.contains(r)&&e.classList.remove(r),e.classList.contains(t)&&e.classList.add(r)}),e.classList.add(t)},errorsConvert:function(e,t){switch(t){case"Unsupported tld":e.text("Зона не поддерживается");break;case"Domain name incorrect":e.text("Некорректный домен");break;case"Empty whois server for free domain":e.text("Не найден сервер WHOIS");break;default:e.html("Ошибка проверки домена.<br/>Попробуйте позже")}}};$(function(){PackageSwitcher.init()});var PackageSwitcher={switchClass:"period-year",dataPeriodYear:"periodYear",dataPeriodMonth:"periodMonth",init:function(){var e=$(".options-switcher-container");0!==e.length&&($(".switch-minus",e).prop("disabled",!0),$("#custom_val-quota",e).val(0),$("#custom_val-sites",e).val(0))},toggle:function(e){var d=this,l=$(e),t=$(".packages__item"),a=$(".period__item");l.toggleClass(d.switchClass),a.toggleClass("active"),t.each(function(){var e=$(".options-switcher-container",this),t=$(".price-value",this),a=$(".price-text",this),r=$(".package-order-btn",this),o=$(".show-only-year",this),i=$(".show-domain-price",this),s=0,n=0;l.hasClass(d.switchClass)?(s=parseInt(t.data(d.dataPeriodYear)),r.data("service",r.data("service-12m"))):(s=parseInt(t.data(d.dataPeriodMonth)),r.data("service",r.data("service-1m"))),n+=s,e.length&&(n+=parseInt($("#custom_val-quota",e).val())*parseInt($("#custom_fee-quota",e).val()),n+=parseInt($("#custom_val-sites",e).val())*parseInt($("#custom_fee-sites",e).val())),t.data("value",s),a.text(n),o.toggleClass("hidden"),o.length&&i.toggleClass("hidden")})}};function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}$(function(){InputSelect.init(),InputCheckbox.init(),InputSwitchery.init(),SubMenuSwitcher.init(),HelpButtons.init(),TabsSwitcher.init(),HeaderScrolling.init()}),$.ajaxSetup({type:"POST",dataType:"json",complete:function(){Loader.hide()},error:function(){FieldError.hideAll()}});var HeaderScrolling={toggleClass:"compact-view",topSelector:".header-container__top",bottomSelector:".header-container__bottom",$headerTop:null,$headerBottom:null,scrollTopWatch:0,isCompact:!1,init:function(){this.$headerTop=$(this.topSelector),this.$headerBottom=$(this.bottomSelector),this.scrollTopWatch=$(".header-bottom__menu",this.$headerBottom).offset().top-this.$headerTop.outerHeight();var e=this,t=$(window);$(".top-nav-item",this.$headerTop).each(function(){$(this).css("width",$(this).outerWidth(!0))}),t.scroll(function(){e.handle(t.scrollTop())}).scroll()},handle:function(e){e>=this.scrollTopWatch?this.isCompact||(this.$headerTop.addClass(this.toggleClass),this.$headerBottom.addClass(this.toggleClass),this.isCompact=!0):this.isCompact&&(this.$headerTop.removeClass(this.toggleClass),this.$headerBottom.removeClass(this.toggleClass),this.isCompact=!1)}},Loader={timerId:0,className:"process-loader",processClass:"loading",show:function(e,t){var a=e?$(e):$("body");t=t||0;var r='<div class="'+this.className+'"><div class="'+this.className+'-wheel"></div></div>',o=this.processClass;this.timerId=setTimeout(function(){a.addClass(o),a.append(r)},t)},hide:function(e){clearTimeout(this.timerId);var t=e?$(e):$("body");$("."+this.className,t).remove(),t.removeClass(this.processClass),$("*",t).removeClass(this.processClass)}},Animate={speed:500,goTo:function(e,t){var a=$(e),r=t||this.speed;if(!a.closest(".popup-container").length&&a.length&&a.is(":visible")){var o=a.offset().top-70;$("html,body").stop().animate({scrollTop:o},r)}}},FieldError={show:function(e,t,a){var r=$("#"+t,e).closest(".form-group");Array.isArray(a)&&(a=a.join("<br/>")),r.find(".help-block").html(a),r.addClass("has-error")},hide:function(e,t){var a=$("#"+t,e).closest(".form-group");a.find(".help-block").html(""),a.removeClass("has-error has-success")},showAll:function(e,t){for(var a in t)this.show(e,a,t[a]);Animate.goTo($(".has-error:first",e));var r=$(".has-error:first",e).find('input[type="text"]');r.length&&r.focus()},hideAll:function(e){var t=$(e||"body");$(".help-block",t).html(""),$(".form-group",t).removeClass("has-error has-success")}},InputSwitchery={init:function(){var e=Array.prototype.slice.call(document.querySelectorAll(".i-switchery"));0!==e.length&&e.forEach(function(e){new Switchery(e,{size:"small",color:"#190042",jackColor:"#0DCDC0"})})}},InputCheckbox={init:function(){var e=$(".i-fields");e.length&&void 0!==e.iCheck&&e.iCheck({checkboxClass:"icheckbox_square-purple",radioClass:"icheckbox_square-purple"})}},InputSelect={init:function(){var e=$("select");e.length&&e.each(function(){$(this).wrap('<div class="select-container"></div>')})}},TabsSwitcher={init:function(){var e=$(".tabs-container");if(e.length){e.each(function(){var r=$(".tabs-list",this),o=$(".tabs-content",this);$("a",r).on("click",function(e){e.preventDefault();var t=$(this),a=t.attr("href").replace("#","");$("a",r).removeClass("active"),t.addClass("active"),$(".tabs-list-content",o).addClass("hidden"),$("#tab-"+a).removeClass("hidden"),location.hash=a})});var t=location.hash.replace("#",""),a=$('.tabs-container a[href="#'+t+'"]');a.length&&a.trigger("click")}}},SubMenuSwitcher={init:function(){var e=$(".sub-sections-container"),t=$(".nav-sub-sections");if(0===e.length||0===t.length)return!1;var a=$(".sub-sections-item",t),r=this;$("a",a).on("click",function(e){e.preventDefault(),r.select(this)});var o=location.hash.replace("#","");if(""!==o){var i=$("a",a).filter('[href="#'+o+'"]');i.length&&i.trigger("click")}},select:function(e){var t=$(e),a=$(".sub-sections-container"),r=t.attr("href").replace("#","");location.hash=r,$(".sub-sections-items",a).addClass("hidden"),$("#sub-sections-"+r,a).removeClass("hidden");var o=t.closest(".sub-sections-item");$("a",o.siblings()).removeClass("active"),t.addClass("active")}},HelpButtons={init:function(){$(".btn-help").each(function(){var e,t=$(this),a=t.data("text");if(void 0!==a){e=a.length<=70?160:a.length<=120?200:250;var r='<div class="help-hint"><span class="help-hint-text">'+a+"</span></div>";t.attr("title","").append(r);var o=t.offset(),i=$(window).innerWidth();o.left+e/2>i&&(e=1.5*(i-o.left)-5);var s=-e/2;e<160&&(s-=160-e,e=160),t.find(".help-hint").css({width:e+"px","margin-left":s+"px"})}})}};function wordsAmount(e,t,a){var r=t[0];switch(a=a||!1,e%10){case 1:r=t[1];break;case 2:case 3:case 4:r=t[2]}return 10<=e&&e<=20&&(r=t[0]),a?e+" "+r:r}var BarMenu={toggle:function(e,t){$(e).toggleClass(t)}},HistoryAPI={isAvailable:function(){return!(!window.history||!history.pushState)},addEventListener:function(e){this.isAvailable()&&window.addEventListener("popstate",e)},pushState:function(e,t,a){this.isAvailable()&&history.pushState(e,t,a)},replaceState:function(e,t,a){this.isAvailable()&&history.replaceState(e,t,a)}},UrlHelper={getParam:function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURI(t[1])||0}},CloseCookie={close:function(e,t,a){(t?$(e).closest(t):$(e).parent()).remove(),a&&this.setCookies(a)},setCookies:function(e){var t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie=e+"=0; path=/; expires="+t.toUTCString()}},J={toggle:function(){!0===jivo_api.open().opened&&jivo_api.close()}},Goals={reachGoalByResponse:function(e){e.hasOwnProperty("goal")&&this.reachGoal(e.goal.id,e.goal.name)},reachGoal:function(e,t){if(void 0!==window.yaCounter153937)try{window.yaCounter153937.reachGoal(e,t)}catch(e){console.log("exception",e)}}};$(function(){Order.init(),OrderPage.init(),OrderPartner.init()});var Order={selectorContainer:".order-container",selectorServiceId:"#ordersimpleform-serviceid",selectorOneMoreAccount:"#ordersimpleform-onemoreaccount",selectorPackageName:"#order-package-name",selectorBtnOrderPage:".btn-order-page",$container:null,orderPackage:null,orderEmail:null,init:function(){var r=$(this.selectorContainer);if(r.length){this.$container=r;var o=$("form",r),i=this;o.on("submit",function(e){return e.preventDefault(),$.ajax({url:o.attr("action"),data:o.serialize(),beforeSend:function(){Loader.show(o,250)},success:function(e){if(FieldError.hideAll(o),e.error){if(FieldError.showAll(o,e.error),e.oneMoreAccount&&($(".form-data-sent",r).addClass("hidden"),$(".form-data-section",r).addClass("hidden"),$(".form-data-confirm",r).removeClass("hidden")),e.oneMoreSentEmail)$(".form-data-more-sent-to-email",r).removeClass("hidden"),$(".form-data-sent",r).addClass("hidden"),$(".form-data-section",r).addClass("hidden"),$(".form-data-confirm",r).addClass("hidden");else if(e.noMoreSentEmail){var t=e.error["ordersimpleform-nomoresentemail"].join(" ");$(".form-data-sent",r).addClass("hidden"),$(".form-data-section",r).addClass("hidden"),$(".form-data-confirm",r).addClass("hidden"),i.showInfoWindow(t)}e.error["ordersimpleform-promocode"]&&Order.usePromoRows(".row-promocode",".btn-order-pin")}else{$(".form-data-section",r).remove(),$(".form-data-confirm",r).remove();var a=$(".sent-msg",r);$("#order-msg-email",a).text(e.data.email),i.orderPackage=$(i.selectorPackageName).text(),i.orderEmail=e.data.email,a.removeClass("hidden")}}}),!1})}},show:function(e){var t=this,a=$(e).data();$("body").addClass("over-h"),$(this.selectorServiceId).val(a.service),$(this.selectorPackageName).text(a.packageDesc),$(this.selectorBtnOrderPage).data("package",a.packageName);var r=$(this.selectorContainer),o=$(".order-test-container",r);"shared"===a.packageType?o.removeClass("hidden"):o.addClass("hidden"),Goals.reachGoal(25843794,"registration-form-v2-start-20141126"),r.removeClass("hidden"),$("input:visible",this.$container).eq(0).focus(),$(document).on("keydown",function(e){27===e.keyCode&&($(document).off("keydown"),t.hide())})},showInfoWindow:function(e){var t=$(".form-data-info-window");t.find(".msg-content").html(e),t.removeClass("hidden")},getSuccessSendedMessage:function(){if(this.orderPackage)return'Вы оформили заказ хостинга по тарифу "'+this.orderPackage+'"<br/><br/>Данные для активации аккаунта отправлены на <strong class="color-blue">'+this.orderEmail+"</strong>"},hide:function(){if($("body").removeClass("over-h"),$(".popup-container").addClass("hidden"),this.cancel(),this.orderPackage){var e=this.getSuccessSendedMessage(),t=$(this.selectorContainer);$(".sent-msg-content",t).html(e)}},confirm:function(e){$("#ordersimpleform-onemoreaccount",this.$container).val(1),$(e).closest("form").submit()},cancel:function(){$("#ordersimpleform-onemoreaccount",this.$container).val(""),$(".form-data-info-window",this.$container).addClass("hidden"),$(".form-data-sent",this.$container).addClass("hidden"),$(".form-data-confirm",this.$container).addClass("hidden"),$(".form-data-confirm",this.$container).addClass("hidden"),$(".form-data-section",this.$container).removeClass("hidden"),$(".form-data-more-sent-to-email",this.$container).addClass("hidden"),$(".form-data-no-more-sent-to-email",this.$container).addClass("hidden")},sendCode:function(e){var a=this;$form=$("form",a.$container),$formData=$(e).closest("form").serializeArray(),$formData.push({name:"OrderSimpleForm[sendCode]",value:1}),$.ajax({url:$form.attr("action"),data:$formData,beforeSend:function(){Loader.show($form)},success:function(e){if(!e.error){$(".form-data-more-sent-to-email").addClass("hidden"),a.orderPackage=$(a.selectorPackageName).text(),a.orderEmail=e.data.email,$container=a.container,$(".form-data-section",$container).remove(),$(".form-data-confirm",$container).remove();var t=$(".sent-msg",$container);$("#order-msg-email",t).text(e.data.email),a.orderPackage=$(a.selectorPackageName).text(),a.orderEmail=e.data.email,t.removeClass("hidden")}}})},goOrderPage:function(e){location.href=e+"?package="+$(this.selectorBtnOrderPage).data("package")},usePromoRows:function(e,t){$(t).addClass("hidden"),$(e).removeClass("hidden").find("input").focus()},activate:function(e,t){e.preventDefault();var a=$(t),r=$("#"+a.attr("id")+"_result");return $.ajax({url:a.attr("action"),data:a.serialize(),beforeSend:function(){Goals.reachGoal(25843729,"registration-form-v2-complete-20141126"),r.html(""),Loader.show(r)},success:function(e){e.error?(r.addClass("has-error").html("<span>"+e.error.join("<br/>")+"</span>"),r.append('<a class="btn btn-wide btn-violet btn-hover-blue m-t-20" href="/">На главную</a>')):(r.addClass("has-success").html("<span>Активация прошла успешно!<br/>Данные вашего аккаунта отправлены на почту.</span>"),r.append('<a class="btn btn-wide btn-violet btn-hover-blue m-t-20 m-b-40" href="'+e.data.enter_url+'" onclick="location.href=\'/\'" target="_blank">Войти в панель управления</a>')),void 0!==e.ad_tracker&&$("body").append(e.ad_tracker)}}),!1},admitad:function(e){e&&$("body").append(e)},checkLoginActivation:function(){var t=$("#activation_loader");Loader.show(t);function e(){$.ajax({url:window.location.href,success:function(e){["queued","working"].includes(e.status)||(a.html($(e.result).html()),Loader.hide(t),t.hide(),clearInterval(r))},complete:function(){}})}var a=$(".order-form-result"),r=void 0;e(),r=setInterval(e,5e3)}},OrderPage={selectorForm:".order-page-form",selectorServiceId:"#order_service_id",selectorCustType:"#order_cust_type",selectorRegType:"#order_reg_type",$service:null,$custType:null,$regType:null,init:function(){var e=$(this.selectorForm);return!!e.length&&(this.$service=$(this.selectorServiceId,e),this.$custType=$(this.selectorCustType,e),this.$regType=$(this.selectorRegType,e),$('.page-order-switcher .btn-switch[data-type="'+this.$regType.val()+'"]').click(),this.$custType.change(),$("#org_is_budget").on("ifToggled",function(){OrderPage.setOrgIsBudget(this,".org-account-container")}),$(".order-service-item",e).last().trigger("click"),0!==Array.prototype.slice.call(document.querySelectorAll(".i-switchery-docs")).length&&void 0)},setDocs:function(e){var a=$(e),r=a.prop("checked");$(".order-service-price").each(function(){var e=$(this),t=parseInt(e.data("default"));r&&(t+=parseInt(a.data("fee"))*parseInt(e.data("quarters")));e.html(t+"<small>руб</small>")})},setOrgIsBudget:function(e,t){var a=$(t);e.checked?a.addClass("hidden"):a.removeClass("hidden"),$("input",a).prop("disabled",e.checked)},submit:function(e){var r=$(e);$.ajax({url:r.attr("action"),data:r.serialize(),beforeSend:function(){Loader.show(null,250)},success:function(e){if(FieldError.hideAll(r),e.error)FieldError.showAll(r,e.error);else{var t=$("#page-order-sent");if($("#order-msg-email",t).text(e.data.email),$("#order-msg-id",t).text(e.data.order_id),r.remove(),t.removeClass("hidden"),e.hasOwnProperty("goals"))for(var a in e.goals)Goals.reachGoalByResponse({goal:e.goals[a]})}}})},switchRegType:function(e,t){var a=$(e),r=$(".diff-blocks");r.addClass("hidden"),r.filter(".reg-type-"+t).filter(".cust-type-"+this.$custType.val()).removeClass("hidden"),a.closest(".page-order-switcher").find(".active").removeClass("active"),a.addClass("active"),this.$regType.val(t)},changeCustType:function(e){var t=$(".diff-blocks");t.addClass("hidden"),t.filter(".cust-type-"+e.value).filter(".reg-type-"+this.$regType.val()).removeClass("hidden"),$(".i-switchery").each(function(){this.checked&&$(this).trigger("click")})},setService:function(e,t){var a=$(e);return a.closest(".order-services").find(".active").removeClass("active"),a.addClass("active"),this.$service=$(this.selectorServiceId),this.$service.val(t),!1}},OrderPartner={selectorForm:".order-partner-form",selectorPartnerType:"#order_partner_type",$partnerType:null,init:function(){var e=$(this.selectorForm);e.length&&(this.$partnerType=$(this.selectorPartnerType,e),this.$partnerType.change())},submit:function(a){var r=$(a);$.ajax({url:r.attr("action"),data:r.serialize(),beforeSend:function(){Loader.show(r,250)},success:function(e){if(FieldError.hideAll(r),e.error)FieldError.showAll(r,e.error);else{var t=$("#partner-order-sent");r.remove(),t.removeClass("hidden"),Animate.goTo(a)}}})},changePartnerType:function(e){var t=$(".diff-blocks");t.addClass("hidden"),$(":input",t).prop("disabled",!0),t.filter(".partner-type-"+e.value).removeClass("hidden"),t.filter(".partner-type-"+e.value).find(":input").prop("disabled",!1)}};$(function(){Partners.init()});var Partners={init:function(){var a=$(".partner-items-container");if(0!==a.length){var r=$(".partners-nav");if(0!==r.length){$("a",r).on("click",function(){var e=$(this),t=$("#partner-item-"+e.attr("href").replace("#",""));$("a",r).removeClass("active"),e.addClass("active"),$(".partner-item",a).addClass("hidden"),t.removeClass("hidden")});var e=location.hash.replace("#","");if(""!==e){var t=$('a[href="#'+e+'"]'),o=t.closest(".partner-item");o.length?($('a[href="#'+o.data("item")+'"]').trigger("click"),location.hash=e):t.trigger("click")}}}},archive:function(e){$(e).closest("table").find(".hidden").removeClass("hidden")}};$(document).ready(function(){Payment.init()});var Payment={TYPE_YM:"yandexmoney",YM_SB:"SB",YM_AC:"AC",YM_AB:"AB",YM_PC:"PC",YM_MC:"MC",YM_WM:"WM",TYPE_SB_ONLINE:"sberbank_online",TYPE_SB_CARD:"sberbank_card",TYPE_SB_CARD_ADVANCED:"sberbank_card_advanced",TYPE_DO:"dengionline",TYPE_WM:"webmoney",TYPE_NS:"newsymbol",TYPE_PSKB:"pscb",TYPE_TERM:"terms",TYPE_QIWI:"qiwi",TYPE_BNKF:"bnkf",TYPE_BNKI:"bnki",TYPE_BNKU:"bnku",init:function(){if(0!==$(".payment-container").length){var e=location.hash.replace("#","");if(""!==e)if(e===this.TYPE_BNKI){var t=$(".switch-bnki");this.showForm(t,this.TYPE_BNKI)}else{var a=$('a[href="#'+e+'"]');a.length&&a.trigger("click")}else $(".payment-item").eq(0).trigger("click");var r=this;$(document).on("submit",".form-process",function(e){return e.preventDefault(),r.process(this),!1})}},bnkSwitch:function(e,t){this.showForm(e,t),location.hash=t},submitForm:function(e){return $("#form-"+e).submit(),!1},showContent:function(e){var t=$("#content-"+e);t.removeClass("hidden"),$("html, body").stop().animate({scrollTop:t.offset().top-30},500)},showForm:function(e,t,a){var r=t;t===this.TYPE_SB_CARD_ADVANCED&&(t=this.TYPE_SB_CARD);var o,i=$("#prepare-"+t),s=i.closest(".pay-data-form"),n=$("#form-"+t);if($(".content-items").addClass("hidden"),s.siblings().addClass("hidden"),s.removeClass("hidden"),t===this.TYPE_YM){$(".pay-"+t+"-logo",i).addClass("hidden");var d=$("#paymentType",n),l=$("#paymentform-suboperator",i);void 0!==a?(o=".payment-ym-"+a.toLowerCase(),$("#pay-"+t+"-logo-"+a,i).removeClass("hidden"),l.val(a),d.val(a)):(o=".payment-ym",$("#pay-"+t+"-logo",i).removeClass("hidden"),l.val(""),d.val(""))}else o=".payment-"+r;var c=$(".payment-item");c.removeClass("active"),c.filter(o).addClass("active");var h=$(".header-container__top").height(),m=60;-1<[this.TYPE_SB_CARD_ADVANCED,this.TYPE_SB_CARD].indexOf(r)&&($(".payment-logo--"+this.TYPE_SB_CARD+", .payment-logo--"+this.TYPE_SB_CARD_ADVANCED).hide(),$(".payment-logo--"+r).show(),r===this.TYPE_SB_CARD&&(m=260)),$("html, body").animate({scrollTop:s.offset().top-h-m},300,function(){$("input:visible",i).eq(0).focus()})},showKktEmailForm:function(e){e.preventDefault();var t=e.target.dataset.selector;return $("."+t).toggleClass("hidden"),!1},process:function(e){var m=this,u=$(e);$.ajax({async:!1,url:u.attr("action"),beforeSend:function(){Loader.show(u.closest(".payment-form"),500)},data:u.serialize(),complete:null,error:function(){Loader.hide(),FieldError.hideAll(u)},success:function(e){if(FieldError.hideAll(u),e.error)Loader.hide(),FieldError.showAll(u,e.error);else{var t=$("#form-"+e.operator);switch(e.operator){case m.TYPE_SB_CARD:case m.TYPE_SB_CARD_ADVANCED:var a=e.pay_url.split("?"),r=a[0],o=a[1],i=new URLSearchParams(o);t.html(""),t.attr("action",r);var s=!0,n=!1,d=void 0;try{for(var l,c=i.keys()[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value;t.append('<input type="hidden" name="'+h+'" value="'+i.get(h)+'">')}}catch(e){n=!0,d=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw d}}t.submit();break;case m.TYPE_WM:t.find("#LMI_PAYMENT_AMOUNT").val(e.LMI_PAYMENT_AMOUNT),t.find("#LMI_PAYMENT_DESC_BASE64").val(e.LMI_PAYMENT_DESC_BASE64),t.find("#LMI_PAYEE_PURSE").val(e.LMI_PAYEE_PURSE),t.find("#inv_id").val(e.inv_id),t.submit();break;case m.TYPE_YM:t.find("#scid").val(e.scid),t.find("#ShopID").val(e.ShopID),t.find("#Sum").val(e.Sum),t.find("#customerNumber").val(e.customerNumber),t.find("#inv_id").val(e.inv_id),t.submit();break;case m.TYPE_DO:t.find("#order_id").val(e.inv_id),t.find("#project").val(e.project),t.find("#nickname").val(e.nickname),t.find("#nick_extra").val(e.nick_extra),t.find("#amount").val(e.amount),t.submit();break;case m.TYPE_NS:Loader.hide(),t.find(".billing-number").text(e.billing_number),t.removeClass("hidden");break;case m.TYPE_BNKF:document.location="/pay/bnkf_print.html?ih="+e.hash;break;case m.TYPE_BNKI:case m.TYPE_BNKU:document.location="/pay/bnku_print.html?ih="+e.hash}}}})}};$(".rating-widget__button").on("click",function(){$(".rating-widget__content, .rating-widget__button__description").toggle()});var $ratingContent=$(".rating-widget__content");$ratingContent.length&&$ratingContent.find("a").on("click",function(){$.post($ratingContent.data("url"))});var Score={send:function(e){if("+1"===e||"-1"===e){var t="score",a=$("#"+t),r=$(".score__container"),o=$("#score__form"),i={id:UrlHelper.getParam("id"),key:UrlHelper.getParam("key"),quality:e};if(o.serializeArray().length){var s=o.serializeArray().shift();i[s.name]=s.value}$.ajax({url:$("#score__form").attr("action"),data:i,beforeSend:function(){Loader.show(a)},success:function(e){r.remove(),a.find("h1").html(e.message),Loader.hide()}})}return!1}},Search={selectorField:".ya-site-form__input-text",selectorSubmit:".ya-site-form__submit",init:function(){var e=$(this.selectorSubmit);0!==e.length&&(e.removeAttr("style"),e.attr("class","btn btn-extra-wide btn-input btn-violet btn-hover-blue"))}};$(function(){Shop.init()});var Shop={init:function(){var a=$(".shop-items-container");if(0!==a.length){var r=$(".shops-nav");if(0!==r.length){$("a",r).on("click",function(){var e=$(this),t=$("#shop-item-"+e.attr("href").replace("#",""));$("a",r).removeClass("active"),e.addClass("active"),$(".shop-item",a).addClass("hidden"),t.removeClass("hidden")});var e=location.hash.replace("#","");if(""!==e){var t=$('a[href="#'+e+'"]'),o=t.closest(".shop-item");o.length?($('a[href="#'+o.data("item")+'"]').trigger("click"),location.hash=e):t.trigger("click")}}}}},SupportForm={submit:function(a){var r=$(a);$.ajax({url:r.attr("action"),data:r.serialize(),beforeSend:function(){Loader.show(r.closest(".container-inside"),250)},success:function(e){if(FieldError.hideAll(r),e.error)FieldError.showAll(r,e.error);else{var t=$("#support-form-sent");r.remove(),t.removeClass("hidden"),Animate.goTo(a)}}})}};